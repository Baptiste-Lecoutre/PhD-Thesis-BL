\chapter{Mises à jour de l'expérience}
\label{ch:new_exp}
%\begin{tikzpicture}[remember picture, overlay]
%\node[anchor=north east,inner sep=0pt] at (current page.north east) {\includegraphics[scale=1]{Fig/Chapter1/g825.png}};
%\end{tikzpicture}

Nous avons vu dans le chapitre précédent comment, expérimentalement, nous pouvons créer une onde de matière obtenue par la condensation de Bose-Einstein. Nous avons ainsi présenté les principaux outils dont nous disposons pour manipuler les atomes et la manière dont nous en tirons profit sur notre dispositif. Une telle plateforme recquiert une quantité importante de matériels variés qu'il est nécessaire d'entretenir, de réparer, voire de remplacer. 

Dans ce nouveau chapitre, nous nous pencherons sur les modifications apportées à l'expérience au cours de ma thèse. Dans la première partie, nous parlerons d'informatique et plus particulièrement du contrôle de l'expérience. Dans un second temps, nous caractériserons la lévitation magnétique suite à une avarie sur le circuit de refroidissement à eau. Ensuite, nous calibrerons le piège dipolaire dont le laser source a été changé. Pour terminer, nous discuterons de l'amélioration de l'évaporation optique permise par les changements précédents.

\section{Mise à jour de l'informatique de l'expérience}
Souvent absente des présentations des expériences, l'informatique occupe pourtant une place primordiale dans les dispositifs d'atomes ultra-froids. Le contrôle simultané et de manière séquentielle des différents équipements de l'expérience, souvent précis à la micro-seconde, n'est possible qu'à l'aide d'un ordinateur disposant de sorties de tension controllables. Cet ordinateur, appelé \emph{séquenceur}, constitue le cerveau de l'ensemble du dispositif et contrôle tous les éléments nécessaires à la manipulation des atomes.

Le second aspect où l'informatique se rend indispensable réside dans l'acquisition et le traitement d'images. Le contrôle des caméras et l'extraction des quantités physiques à partir d'images expérimentales nécessite l'utilisation d'un ordinateur et d'au moins un logiciel adapté. 

De manière générale, les ordinateurs sont les éléments du dispositif avec lesquels l'expérimentateur intéragit le plus. Dans cette partie, on présentera donc les changements informatiques ayant eu lieu durant ma thèse.

\subsection{Contrôle de l'expérience: passage à la suite Cicero}
\label{sc:cicero}
Une modification majeure a été le changement du séquenceur de l'expérience. Le précédent système développé par André Villing, ingénieur électronicien du laboratoire maintenant retraité, était piloté de manière programmatique depuis le logiciel Matlab. À des fins de maintenance, le nouveau séquenceur est d'origine commerciale et est basé sur du matériel \emph{National Instruments}:
\begin{itemize}
\item[\textendash] Un ordinateur \emph{PXIe-8840} dans un chassis \emph{PXIe-1078} qui alimente aussi les cartes de génération de signaux.
\item[\textendash] Deux cartes numériques \emph{PXIe-6535} de 32 voies chacune.
\item[\textendash] Deux cartes analogiques \emph{PXIE-6738} de 32 voies $\pm10$V chacune et codées sur 16 bits.
\end{itemize}
En addition, un circuit logique programmable (\emph{FPGA}) \emph{XEM3001} provenant de \emph{Opal-Kelly} permet de générer une horloge de fréquence variable pour le matériel \emph{National Instruments}. La justification de cette horloge de fréquence variable réside dans la grande variabilité de la durée des différentes étapes d'une expérience d'atomes ultra-froids: l'expérience peut rester dans le même état plusieurs secondes (pendant le chargement d'un MOT par exemple) tout comme elle doit pouvoir changer d'état pendant quelques microsecondes seulement (pendant l'imagerie par exemple). Une séquence durant typiquement 30s discrétisée toutes les microsecondes saturerait alors la mémoire de l'ordinateur. 

L'écriture de la séquence se fait à présent grâce à la suite \emph{Cicero Word Generator}, développée au \emph{MIT} dans le groupe de Wolfgang Ketterle \citep{keshet2013distributed}. Cette suite comporte deux logiciels qui fonctionnent selon une architecture client/serveur. Le client \emph{Cicero} est une interface graphique dans laquelle l'utilisateur écrit une séquence sous la forme d'une suite d'étapes comme illustré figure \ref{fig:cicero}. Au lancement d'un cycle expérimental, \emph{Cicero} envoie les données de séquence au serveur \emph{Atticus} qui calcule alors les consignes des cartes ainsi que l'horloge variable à appliquer \citep{keshet2008cicero}.

\begin{figure}
\centering
\includegraphics[width=0.7\textwidth]{Fig/Modif_exp/cicero.png}
\caption{\textbf{Capture d'écran de \emph{Cicero}.} Une séquence est une suite d'étapes (des colonnes dans l'interface) pendant lesquelles on peut faire des motifs avec les voies analogiques. Les voies numériques changent d'état en général entre deux étapes. Il est possible de désactiver certaines étapes et d'utiliser des variables. Figure tirée de \citep{keshet2013distributed}.}
\label{fig:cicero}
\end{figure}

Grâce à cette architecture client/serveur, il est possible de connecter une interface \emph{Cicero} à plusieurs serveurs. Nous avons ainsi développé un serveur supplémentaire\footnote{Une attention particulière a été accordée à n'apporter aucune modification au code source de la suite \emph{Cicero} excepté dans l'environnement de ce serveur. Les environnements de \emph{Cicero}, \emph{Atticus} et les environnements communs n'ont subit aucun changement pour s'assurer de la compatibilité avec la version compilée 1.64rev7 de la suite.} afin de faciliter notre traitement de données. Celui-ci enregistre les principales données de séquence\footnote{Il s'agit du nom de séquence, de l'heure de lancement, de l'ensemble des variables, des étapes, des groupes d'étapes et de la dernière consigne du piège dipolaire avant le temps de vol.} à chaque cycle.

Ce changement de séquenceur ouvre de nouvelles perspectives en augmentant le nombre de voies utilisables (16 voies analogiques codées sur 12 bits et 48 voies numériques avec le précédent système) tout en permettant la génération de signaux arbitraires (auparavant limités à des morceaux de rampes).


\subsection{Développement d'une nouvelle interface d'acquisition et de traitement d'images}
Comme présenté dans la partie \ref{sc:imagerie}, les caméras que l'on utilise sur l'expérience sont configurées et contrôlées via le logiciel Matlab. En particulier, l'acquisition et le traitement des images se faisait à l'aide d'une interface commune avec l'ancien séquenceur. Son remplacement a donc eu un impact important sur le fonctionnement de la partie imagerie. 

En conséquence, nous avons réalisé une nouvelle interface graphique permettant de configurer les caméras, d'acquérir et de traiter les images, d'enregistrer les données et de contrôler tout les éléments non adressables depuis \emph{Cicero}. Le cahier des charges de cette nouvelle interface est donc le suivant:
\begin{itemize}
\item[\textendash] Gestion des trois caméras, avec possibilité de faire l'acquisition simultanée sur les deux caméras de la chambre de science\footnote{Un ordinateur supplémentaire était nécessaire pour le contrôle de la caméra \textit{bottom}, pilotée via une autre interface. Il fallait donc synchroniser ces deux ordinateurs qui enregistraient chacun leurs fichiers de données.}.
\item[\textendash] Imagerie par absorption et par fluorescence.
\item[\textendash] Calcul des grandeurs physiques pour chaque image.
\item[\textendash] Lecture des données de Cicero récupérées grâce au serveur que nous avons développé.
\item[\textendash] Programmation en début de cycle des sources radio-fréquence utilisées pour l'évaporation radio-fréquence et la manipulation de l'état de spin dans la chambre de science\footnote{Cette programmation en début de cycle est rendue possible grâce à l'utilisation d'un \emph{FileSystemWatcher} provenant d'une bibliothèque .NET utilisable dans Matlab. Un fichier texte contenant les données du cycle en cours est généré en début de séquence par le serveur que nous avons développé, déclenchant alors automatiquement sa lecture par l'interface.}.
\item[\textendash] Enregistrement de l'ensemble des données et des paramètres du cycle pour un futur traitement.
\end{itemize}
L'utilisation de cette nouvelle interface a donc permit de centraliser les données générées par l'acquisition d'images en n'ayant plus besoin d'un ordinateur supplémentaire (et de la synchronisation associée). 











\section{Calibration de la lévitation magnétique}
\label{sc:levitation}
Comme présenté partie \ref{sc:chambre_science}, la lévitation magnétique est un élément essentiel de notre expérience. En plus d'être un pré-requis pour l'étude de la localisation d'Anderson à trois dimensions, celle-ci nous permet de manière générale d'obtenir des échantillons particulièrement froids. Son bon fonctionnement est donc une priorité pour notre expérience.

Malheureusement, une avarie dans le circuit de refroidissement de la lévitation a conduit à son démontage. Les modifications apportées avant remontage ayant pu conduire à une modification du comportement magnétique du système, une nouvelle calibration des champs générés a été menée.

Dans cette partie, nous présenterons dans un premier temps notre système de lévitation ainsi que les modifications qui y ont été apportées. Ensuite, nous nous pencherons sur les méthodes utilisées pour calibrer le système après sa réinstallation sur l'expérience, en commençant par des expériences d'oscillations puis à l'aide transitions radio-fréquences.




\subsection{Implémentation de la lévitation magnétique}

L'ensemble du système de la lévitation magnétique a été développé alors que l'équipe se dirigeait vers les expériences de localisation d'Anderson à trois dimensions. De nombreux détails de conception pourront être retrouvés dans le manuscrit de thèse d'Alain Bernard \citep{bernard2010transport}, mais rappelons les éléments nécessaires à la suite.

La lévitation magnétique est composée de plusieurs bobines collées dans un support en aluminium, qui sert aussi de réservoir thermique à l'aide d'un refroidissement à eau. Ce refroidissement est à présent effectué par le contact entre le support en aluminium et la circulation d'eau dans deux tubes en cuivre encastrés\footnote{Auparavant, l'eau circulait directement dans des trous percés dans le support en aluminium. Le débouchage de ces trous leur a fait perdre leur étanchéité, et après quelques essais infructueux, nous avons retenu la solution de deux tubes de cuivre encastrés et débouchants. De nombreux tests électriques ont été menés sur les bobines tout au long de leur maintenance pour s'assurer de l'absence de dégradation.}. L'efficacité de ce refroidissement est illustrée figure \ref{fig:refroidissement_levitation}.

\begin{figure}
\centering

\caption{\textbf{Mesure de l'efficacité de refroidissement.} Ces mesures ont été réalisées dans des conditions proches de véritables cycles expérimentaux. Le même courant a été appliqué pendant 10s sur toutes les bobines à la fin de séquences habituelles. La température a été mesurée après la répétition d'au moins 30 cycles et en s'assurant de sa stabilisation.}
\label{fig:refroidissement_levitation}
\end{figure}


Ces supports, disposés de part et d'autre de la cellule, comportent chacun trois bobines. Les deux paires de bobines les plus proches de la cellule créent un champ de biais au niveau des atomes, dans des configurations légèrement plus rapprochée que celle de Helmholtz pour les bobines les plus proches de la cellule et légèrement plus éloignée pour les autres\footnote{L'intérêt de cette configuration est de contrôler la courbure du champ au niveau des atomes indépendamment de la valeur du champ. Il suffit de jouer sur l'équilibre des courants dans les différentes paires de bobines pour changer la courbure.}. Enfin, la paire de bobines la plus éloignée permet de créer un gradient magnétique qui permet de lutter contre la gravité.

Le champ magnétique au niveau des atomes peut alors être écrit:
\begin{equation}
\mathbf{B}=\left( \frac{b'}{2}x \right) \vec{x} + \left[ B_0 - b'y + b'' \left( y^2 - \frac{x^2+z^2}{2} \right) \right] \vec{y} + \left( \frac{b'}{2}z \right) \vec{z}
\end{equation}
où $b'$ correspond au gradient magnétique généré par les bobines de \emph{Gradient}, les plus éloignées de la cellule. Le  paramètre $b''$ est la courbure du champ généré par l'écart des bobines de \emph{Biais} à la configuration de Helmholtz. 
Le potentiel magnétique étant proportionnel à la norme du champ, celle-ci est donnée à l'ordre deux par
\begin{equation}
B=B_0 -b' y + b'' y^2 +\frac{1}{2} \left( \frac{b'^2}{4 B_0} - b'' \right) \left( x^2 + z^2 \right) 
\label{eq:norme_levitation}
\end{equation}
où le terme linéaire est celui qui permet de compenser la gravité.



Comme mentionné précédemment, il existe une limite pour les fréquences de piégeage (formule \ref{eq:theoreme_wing}) qui décroît avec la valeur du champ magnétique. Une stratégie usuelle est donc de créer un champ aussi fort que possible, qui est d'environ 2000G avec notre système. Pour de tels champs, le potentiel magnétique n'est plus décrit par l'effet Zeeman linéaire, mais par la formule de Breit-Rabi \ref{eq:Breit-Rabi}. En revanche, pour une petite zone autour du centre de la lévitation, on peut simplifier l'étude en supposant que le champ change peu $B\simeq B_0$. On peut ainsi définir un facteur de Landé local
\begin{equation}
\widetilde{g}_{\mathrm{F},m_{\mathrm{F}}}(B_0)=\frac{1}{m_{\mathrm{F}} \mu_{\mathrm{B}}} \frac{\mathrm{d}E}{\mathrm{d}B}(B_0)
\end{equation}
obtenu à l'aide d'un développement limité de la formule de Breit-Rabi. La physique derrière cette approche est de considérer l'effet Zeeman linéaire sur un état dont la réponse dépend du champ de Biais $B_0$. La valeur du gradient nécessaire pour compenser la gravité peut alors être donnée par:
\begin{equation}
b'=\frac{mg}{m_{\mathrm{F}} \widetilde{g}_{\mathrm{F},m_{\mathrm{F}}}(B_0) \mu_{\mathrm{B}}}
\end{equation}
Cette dépendance est illustrée figure \ref{fig:levitation_etats} pour les différents états internes d'intérêt dans cette thèse: $\left| F=1,m_{\mathrm{F}}=-1 \right\rangle$, $\left| F=2, m_{\mathrm{F}}=+1 \right\rangle$ et $\left| F=2, m_{\mathrm{F}}=-2 \right\rangle$. Notons trois résultats remarquables: 
\begin{itemize}
\item[\textendash] L'état $\left| F=2, m_{\mathrm{F}}=-2 \right\rangle$ nécessite un gradient indépendant du biais magnétique pour être lévité.
\item[\textendash] Les états $\left| F=1, m_{\mathrm{F}}=-1 \right\rangle$ et $\left| F=2,m_{\mathrm{F}}=+1 \right\rangle$ sont lévités pour le même gradient à bas champ.
\item[\textendash] L'état $\left| F=1,m_{\mathrm{F}}=-1 \right\rangle$ ne peut être lévité qu'à bas champ, le gradient nécessaire pour contrer la gravité augmentant avec le champ magnétique.
\end{itemize}

\begin{figure}
\centering

\caption{\textbf{Gradient nécessaire pour compenser la gravité.} La valeur du gradient magnétique à appliquer pour léviter dépend de l'état électronique, mais aussi du biais magnétique $B_0$ par la formule de Breit-Rabi. L'état $\left| F=1, m_{\mathrm{F}}=-1 \right\rangle$ ne peut être lévité qu'à bas champ, l'alimentation des bobines de gradient ne pouvant délivrer plus de 50A.}
\label{fig:levitation_etats}
\end{figure}




\subsection{Calibration par oscillations}
\label{sc:oscillations_levitation}
Il est nécessaire que les atomes se trouvent au centre de la lévitation car il s'agit de l'endroit où ils ne subissent pas d'effet de piégeage. Si cette condition n'est pas vérifiée, alors la réalisation de temps de vol en présence de la lévitation conduira à un mouvement du nuage. Pour l'état $\left| F=1, m_{\mathrm{F}}=-1 \right\rangle$ en particulier, le centre de masse du nuage décrit des oscillations au tour du centre de la lévitation dont les fréquences peuvent être estimées à l'aide de la norme du champ magnétique \ref{eq:norme_levitation}:
\begin{equation}
\omega_x^2=\omega_z^2=\left| \frac{m_{\mathrm{F}} \widetilde{g}_{\mathrm{F},m_{\mathrm{F}}} \mu_{\mathrm{B}}}{m} \left( \frac{b'^2}{4 B_0} - b'' \right) \right|
\quad \text{et} \quad
\omega_y^2= \left| \frac{2 m_{\mathrm{F}} \widetilde{g}_{\mathrm{F},m_{\mathrm{F}}} \mu_{\mathrm{B}} b''}{m} \right|
\end{equation}
L'exploitation de ces oscillations fournit donc de précieux renseignements quant à la position du centre de la lévitation, mais aussi quant à la configuration magnétique dans laquelle les atomes se déplacent.


Déplacement du centre de la lévitation à l'aide champs de compensation.
\begin{equation}
\mathbf{B}=\left( \frac{b'}{2}x \right) \vec{x} + \left[ B_0 - b'y + b'' \left( y^2 - \frac{x^2+z^2}{2} \right) \right] \vec{y} + \left( \frac{b'}{2}z +B_z \right) \vec{z}
\end{equation}
\begin{equation}
z_c=-\frac{2B_z}{b'}
\end{equation}
effets de champs de biais de compensation.







\subsection{Calibration par radio-fréquences}
Une calibration plus précise est réalisée à l'aide de radio-fréquences.
caractérisation complète du champ rayonné par les 2 biais et les deux compensations horizontales. possibilité d'extraire le champ naturellement présent. Utilisation des 7 sept transitions. 




Cette étude a permis non seulement de calibrer nos bobines dont la position, l'orientation et le comportement magnétique ont été légèrement modifiés. Mais en plus, ça nous a permit de découvrir de nouvelles limitations. 
Future nécessité de pouvoir changer les courants de compensation de manière totalement arbitraire et contrôlée en cours de séquence non réalisable avec nos alimentations actuelles: étude en cours. 




À toutes fins utiles, les calibrations sont les suivantes.










\section{Changement du laser telecom et calibration du piège optique}
Listés dans la partie \ref{sc:chambre_science}, uniquement deux éléments participent à la manipulation d'atomes dans la chambre de science avant condensation. Le premier élément, la lévitation magnétique, a fait l'objet d'un entretien essentiel présenté dans la partie précédente. 

Cette partie se concentrera sur le second élément, le piège optique. Nous commencerons par présenter le système optique et décrire les changements opérés, puis nous décrirons la calibration de ce piège sur les atomes.

\subsection{Changement du laser telecom}
Dans le chapitre précédent, nous avons vu que le piège dipolaire était composé de deux faisceaux se croisant dans la chambre de science. Ces deux faisceaux, la pince et le dimple, sont orientés suivant les directions $\vec{z}$ et $\vec{y}$ respectivement et permettent de passer le seuil de condensation. Il s'agit donc du piège donnant au condensat ses propriétés. De plus c'est avec ce même piège que l'on met en oeuvre les techniques de refroidissement extrême que sont l'ouverture adiabatique du piège ou encore via le refroidissement par delta-kick. Il est donc primordial d'avoir une connaissance complète des caractéristiques de ce piège.

Les deux faisceaux du piège dipolaire croisé proviennent d'une source laser commune avant d'être mis en forme séparément. Cette source, un laser fibré Ytterbium de \emph{Keopsys} émettant une puissance 20W en continu à une longueur d'onde $\lambda=1070$nm, a été changée au cours de ma thèse. Ce laser a été sujet à un grand nombre d'opérations de maintenance, et, dans les mois précédant son remplacement, il ne pouvait plus émettre que 14W lors de son allumage et seulement 12.5W en fin de journée.
 
Cette source a été remplacée par un laser fibré Ytterbium \emph{YLR-50-LP-A-Y12} de \emph{IPG}, opérant à la même longueur d'onde $\lambda=1070$nm, et avec une puissance maximale mesurée à 55W. La taille du faisceau est de 0.8mm (contre 1.4mm pour le laser Keopsys), il a donc fallu adapter un téléscope afin de garder les mêmes tailles de faisceaux. Le montage est présenté figure \ref{fig:optique_1070}.

\begin{figure}
\centering

\caption{\textbf{Schéma du montage optique pour le piège dipolaire.} Le laser source passe dans un premier téléscope avant d'étre séparé en deux parties.}
\label{fig:optique_1070}
\end{figure}



Taille de faisceau de 0.8mm
Laser fibré, dont la taille du faisceau de sortie était de 1.4mm
But: garder la même configuration sur les atomes: La pince ça va, c'est fibré, faut juste pas trop merder sur le mode matching à l'entrée de la fibre pour avoir la même puissance qui sort et pas cramer la fibre.
Le dimple c'est plus chiant, le chemin est direct jusqu'aux atomes via des téléscopes tubés. Beaucoup de périscopes, possibilité que l'ellipse tourne. On veut garder 180µm*90µm.


\subsection{Calibration du piège optique}
Nécessité de calibrer ce qu'il se passe au niveau des atomes. On contrôle bien ce qu'il se passe avant, mais avec le dimple on n'a pas de fibre pour fixer la taille. 

Estimation de la taille du dimple à l'aide de la divergence du faisceau derrière la cellule. Mesure à la caméra. Tailles estimée à 160*80µm. 

Mesure de la puissance. Estimation des fréquences de piégeage par ces mesures.

Mesures réelles des fréquences de piégeage dans la direction verticale $\vec{y}$ donnée par la pince et la direction horizontale $\vec{z}$ donnée par le dimple.

Mesure dans la direction verticale à l'aide de la lévitation: on dispose d'un bouton pour allumer et éteindre la gravité, et donc générer une force pendant un bref instant pour donner un mouvement aux atomes dans le piège.

Mesure dans la direction horizontale selon deux méthodes suivant la puissance. À haute puissance, on applique un gradient magnétique pour pousser les atomes à l'aides des bobines de compensations. À plus basses puissance, où le piégeage de la lévitation peut arracher les atomes de l'ODT, on éteint les bobines de compensation pour générer la force plutôt. 

Saturation pour les deux faisceaux à haute puissance, d'origines différentes. Pour la pince, il s'agit du maximum de diffraction du modulateur acousto-optique. Pour le dimple, il s'agit du maximum d'émission de la source RF. 

Variation de la puissance en allant plus ou moins loin dans l'évaporation optique.










\section{Optimisation de l'évaporation tout-optique}
\label{sc:evap_optique}

